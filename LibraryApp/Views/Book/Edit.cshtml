@model BookCreateEditViewModel
@{
     ViewData["Title"] = "Edytuj książkę";
}

<partial name="Templates/_Alert" model="@ViewData["Alert"]?.ToString()"/>

<div class="col-sm-6 mx-auto">
    <form asp-controller="Book" asp-action="Edit" method="post">
        <h3 class="mb-3">Edytuj książkę</h3>
        
        <div class="mb-3">
            <label for="Title">Tytuł</label><br>
            <input id="Title" name="Book.Title" type="text" class="form-control" minlength="3" maxlength="100" value="@Model.Book.Title" required/>
        </div>

        <div class="mb-3">
            <label for="Author">Autor</label><br>
            <select id="Author" name="Book.AuthorId" class="form-control">
                <option value="">Wybierz autora</option>
                @foreach (var Author in @Model.Authors)
                {
                    @if (@Author.Id == @Model.Book.AuthorId){
                        <option value="@Author.Id" selected>@Author.Name @Author.LastName</option>
                    }
                    else {
                        <option value="@Author.Id">@Author.Name @Author.LastName</option>
                    }
                }
            </select>
        </div>
        
        <div class="mb-3">
            <label for="Description">Opis</label><br>
            <input id="Description" name="Book.Description" type="text" class="form-control" minlength="3" maxlength="100" value="@Model.Book.Description" required/>
        </div>

        <div class="mb-3">
            <label for="File">Obraz</label><br>
            <input id="File" name="File" type="file" class="form-control-file" onchange="preview();" minlength="3" maxlength="100" >
            <img id="ImagePreview" name="ImagePreview" src="~/images/@Model.Book.Image"  height="100" width="100"/>
        </div>

        <script>
            function preview() {
                ImagePreview.src = URL.createObjectURL(event.target.files[0]);
            }
        </script>

        <div class="mb-3">
            <label for="Year">Rok</label><br>
            <input id="Year" name="Book.Year" type="number" class="form-control" minlength="3" maxlength="100" value="@Model.Book.Year" required/>
        </div>

        <div class="mb-3">
            <label for="City">Miasto</label><br>
            <input id="City" name="Book.City" type="text" class="form-control" minlength="3" maxlength="100" value="@Model.Book.City" required/>
        </div>
        
        <button class="btn btn-primary" type="submit">Zapisz</button>
    </form>
</div>